# 验证码识别器（CaptchaRecognizer）

基于深度学习的验证码识别浏览器插件，支持多种类型的验证码识别。

## 项目结构

- `model/`: 验证码识别模型
- `extension/`: 浏览器扩展前端
- `server/`: 后端API服务

## 功能特性

- 支持多种类型验证码识别（目前仅实现字符型验证码）
- 自动/手动定位网页中的验证码元素
- 用户友好的界面，实时提示
- 记录与共享验证码定位信息
- 错误处理与日志记录

## 项目结构优化

### 状态管理与UI分离

为提高代码的可维护性和可测试性，实现了以下改进：

1. **状态和逻辑分离**：
   - 创建了`state.ts`文件，将状态管理和业务逻辑从Vue组件中抽离
   - 使用依赖注入方式向组件提供状态
   - 减少了App.vue的复杂度，使其只关注UI渲染

2. **消息通信优化**：
   - 统一使用@webext-core/messaging库处理扩展内部通信
   - 移除了window.postMessage机制，简化消息流
   - 在组件中直接操作状态，无需通过消息传递

3. **组件职责明确**：
   - App.vue：负责整体布局和子组件组织
   - CaptchaSelector.vue：专注于验证码选择UI和交互
   - HighlightOverlay.vue：专注于元素高亮显示

### 性能优化

1. 使用`will-change`属性优化动画性能
2. 减少不必要的状态更新和DOM操作
3. 避免在组件中执行复杂计算，移至状态管理层

### 可维护性提升

1. 添加了详细的代码注释和类型定义
2. 统一代码风格和命名约定
3. 按功能模块组织代码，便于扩展

## 开发环境设置

### 扩展前端

```bash
# 进入扩展目录
cd extension

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 后端服务

```bash
# 进入服务器目录
cd server

# 创建虚拟环境（可选）
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# 安装依赖
pip install -r requirements.txt

# 启动服务器
python main.py
```

## 使用方法

1. 在浏览器中加载扩展
2. 访问包含验证码的网站
3. 点击扩展图标打开弹出窗口
4. 若自动检测失败，点击"选择验证码"按钮手动选择
5. 选择并上传验证码元素后，系统将自动识别并填充

## 支持的验证码类型

- 字符型验证码（已实现）
- 滑块验证码（计划中）
- 点选验证码（计划中）
- 旋转验证码（计划中）
- 拼图验证码（计划中）

## 构建

```bash
npm run build
```
